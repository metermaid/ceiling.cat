<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>The Ultimate Guide to General Delimited Input</title>
  <meta name="description" content="Although my heart belongs to ruby, lately, I haven’t been using it at all– I’ve been working on coding tumblr the game in entirely client side JavaScript. To...">
  

  <!-- External libraries -->
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/monokai_sublime.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/css/lightbox.css">

  <!-- Favicon and other icons (made with http://www.favicon-generator.org/) -->
  <link rel="shortcut icon" href="/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="57x57" href="/assets/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/assets/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/assets/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/assets/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/assets/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/assets/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/assets/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/assets/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
  <link rel="manifest" href="/assets/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/assets/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">

  
  <!-- Facebook OGP cards -->
  <meta property="og:description" content="Although my heart belongs to ruby, lately, I haven’t been using it at all– I’ve been working on coding tumblr the game in entirely client side JavaScript. To..." />
  <meta property="og:url" content="http://www.ceiling.cat" />
  <meta property="og:site_name" content="Ceiling.cat" />
  <meta property="og:title" content="The Ultimate Guide to General Delimited Input" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="http://www.ceiling.cat/assets/logo.png" />
  <meta property="og:image:type" content="image/png" />
  <meta property="og:image:width" content="612" />
  <meta property="og:image:height" content="605" />
  

  
  <!-- Twitter: card tags -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="The Ultimate Guide to General Delimited Input">
  <meta name="twitter:description" content="Although my heart belongs to ruby, lately, I haven’t been using it at all– I’ve been working on coding tumblr the game in entirely client side JavaScript. To...">
  <meta name="twitter:image" content="http://www.ceiling.cat/assets/logo.png">
  <meta name="twitter:url" content="http://www.ceiling.cat">
  

  

  <!-- Site styles -->
  <link type="text/css" rel="stylesheet" href="/assets/main.css">
  
  <link rel="canonical" href="http://www.ceiling.cat/2014/08/05/the-ultimate-guide-to-general-delimited-input/">
  <link rel="alternate" type="application/rss+xml" title="Ceiling.cat" href="http://www.ceiling.cat/feed.xml" />
</head>


  <body>

    <header class="navigation" role="banner">
  <div class="navigation-wrapper">
    <a href="/" class="logo">
      <img src="/assets/logo.png" alt="site.title" width="75" height="75">
    </a>
    <a href="javascript:void(0)" class="navigation-menu-button" id="js-mobile-menu">
      <i class="fa fa-bars"></i>
    </a>
    <nav role="navigation">
      <ul id="js-navigation-menu" class="navigation-menu show">
        
          
          <li class="nav-link"><a href="/about/">About</a>
          
        
          
        
          
        
          
        
          
        
          
        
      </ul>
    </nav>
  </div>
</header>


    <div class="page-content">
        <div class="post">

<div class="post-header-container " >
  <div class="scrim ">
    <header class="post-header">
      <h1 class="title">The Ultimate Guide to General Delimited Input</h1>
    </header>
  </div>
</div>

<div class="wrapper">

 <span class="page-divider">
  <span class="one"></span>
  <span class="two"></span>
</span>
 

<section class="post-meta">
  <div class="post-date">August 5, 2014</div>
  <div class="post-categories">
  in 
    
    <a href="/category/ruby">Ruby</a>, 
    
  
    
    <a href="/category/general-delimited-input">General-delimited-input</a>, 
    
  
    
    <a href="/category/percent-notation">Percent-notation</a>, 
    
  
    
    <a href="/category/percent-literals">Percent-literals</a>, 
    
  
    
    <a href="/category/syntax">Syntax</a>
    
  
  </div>
</section>  

<article class="post-content">
  <p>Although my heart belongs to ruby, lately, I haven’t been using it at all– I’ve been working on coding tumblr the game in entirely client side JavaScript. To keep my ruby skills fresh though, I’ve been doing a reading about Ruby on the side. One topic, which I hardly gave any thought to before, has captured my attention: Ruby’s general delimited input, otherwise known as “percent literals” or “percent notation”.</p>

<p>The provenance of these macros is unknown to me. Originally, I ran across to these as “shorthand” which seemed like an odd moniker to me– they’re not at all shorter than the regular syntax. Suggestions online include that these are another of Ruby’s inscrutable Perlisms, like those weird Perl-style global variables, but the only references to them are in the context of Ruby! I can only conclude that they’ve nothing to do with Perl, and that’s a myth perpetuated by Rubyists.</p>

<p>General delimited input notation is defined directly in MRI’s parse.y, and it’s present as far back as version 1.0 from 1996, so it’s likely just sprung from the head of Matz and not a feature cribbed from another language as some people suggest. Whatever its origins, GDI has its uses.</p>

<p>All forms of GDI come in the same basic syntax: <code class="highlighter-rouge">%(some modifier) (some delimiter) (your content) (that delimiter)</code> There are six modifiers for GDI, and some of those have both interpolated and non-interpolated versions. For delimiters, you can use any non-alphanumeric symbol (in the past, you could use alphanumeric ones too, but that’s a terrible practice.) Most commonly, you’ll see people use <code class="highlighter-rouge">%Q{curly brackets}</code>, <code class="highlighter-rouge">%Q(parentheses)</code>, <code class="highlighter-rouge">%Q&lt;these pointy things&gt;</code>, and <code class="highlighter-rouge">%Q[square brackets]</code>, but you can use tildes and even quotation marks, for extra confusion. I’d advise against it, though.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>%W"wait can you even do this?"
=&gt; ["wait", "can", "you", "even", "do", "this?"]
</code></pre>
</div>

<p>Ruby style guides usually advocate the use of parentheses, except in the case of regular expressions, where they advocate curly brackets (since parentheses are very common in RE.)</p>

<p>Contrary to popular belief, one can use your same delimiters unescaped within the GDI, so long as you balance them. So this is fine: <code class="highlighter-rouge">%Q{I like braces like these:{} }</code></p>

<p>But this is not <code class="highlighter-rouge">%Q{I only prefer a single brace:{ }</code></p>

<p>At that point, you should escape that poor brace.</p>

<h3 id="q--q">%q / %Q</h3>
<p>%q is a macro for a single quote non-intepreted string, and %Q is a macro for a double quote interpreted string. Consequentially, in the former you don’t need to really escape any characters– it’s good for strings with both quotation marks. In the latter, you can use string interpolation, so it’s good for strings with both interpolation and double quotes.
If you don’t use a modifier, for example, <code class="highlighter-rouge">%(hello)</code>, it’s a shorthand for %Q.
```
%Q( Daria said, “Can you do this math?: #{1+2}” )
=&gt; “ Daria said, "Can you do this math?: 3" “</p>

<p>%q( Quinn said, “I cannot do this math: #{1+2}” )
=&gt; “ Quinn said, "I cannot do this math: #{1+2}" “</p>

<p>%( Jane said, “I can do this math: #{1+2}” )
=&gt; “ Jane said, "I can do this math: 3" “
<code class="highlighter-rouge">
### %x
%x uses the \` method and runs its contents as a command in a subshell. Use \` unless your command contains that symbol.
</code>
%x(ruby –copyright)
=&gt; “ruby - Copyright (C) 1993-2014 Yukihiro Matsumoto\n”
<code class="highlighter-rouge">
### %r
%r creates an interpolated regex, but the usual syntax of `/regex/` does as well. Use it if your regex has more than one /.
</code>
%r(^Adventure\s?Time$)
=&gt; /^Adventure\s?Time$/
<code class="highlighter-rouge">
### %w / %W
Ruby 1.1 added %w and %W, which are likely the most common form of GDI you'll find in the wild. It's easiest to think of them as a "word array" or a "whitespace-delimited array", if you're pedantic. It creates an array of strings as separated by the whitespace.
</code>
%W( 1 2 3 4 5 #{1+5} )
=&gt; [“1”, “2”, “3”, “4”, “5”, “6”]</p>

<p>%w( 1 2 3 4 5 #{1+5} )
=&gt; [“1”, “2”, “3”, “4”, “5”, “#{1+5}”]
<code class="highlighter-rouge">
### %s
Introduced in Ruby 1.8, lord knows why this exists-- nobody really uses it. %s creates a single symbol, with whitespace in tact. One might be tempted to use it for symbols with whitespace in it, but the preferred method is by using quotes after `:`, like so: `:"this works"`.
</code>
%s(this is useless)
=&gt; :”this is useless”
<code class="highlighter-rouge">
### %i / %I
The latest modifier for GDI, introduced only in Ruby 2.0, this is the cousin to %w and %W, but instead of an array of strings, these create arrays of symbols. As usual, %i is non-interpolated and %I is interpolated.
Be warned, that the interpolated form creates an extra string on the heap for each symbol. How often do you really want an interpolated symbol, anyways?
</code>
fruit = “apple”
%I(banana orange carrot #{fruit})
=&gt; [:banana, :orange, :carrot, :apple]</p>

<p>%i(banana orange carrot #{fruit})
=&gt; [:banana, :orange, :carrot, :”#{fruit}”]
```</p>

<h3 id="conclusions">Conclusions</h3>
<p>In general, GDI has its pros and cons: on the one hand, you can use GDI to avoid escaping literals– if you use a lot of quotation marks and other symbols, it can be significantly less confusion to read.</p>

</article>





<section class="rss">
  <p class="rss-subscribe text"><strong>Subscribe <a href="/feed.xml">via RSS</a></strong></p>
</section>

<section class="share">
  <span>Share: </span>
  
    
    
      <a href="//twitter.com/share?text=The+Ultimate+Guide+to+General+Delimited+Input&url=http://www.ceiling.cat/2014/08/05/the-ultimate-guide-to-general-delimited-input/&via=rtchng"
        onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;">
        <i class="fa fa-twitter-square fa-lg"></i>
      </a>
    
    
    
    
    
    
  
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
  
</section>




<section class="disqus">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    var disqus_shortname = 'ceilingcat';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>



</div>
</div>

    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h3 class="footer-heading">Ceiling.cat</h3>

    <div class="site-navigation">
      
      <p><strong>Site Map</strong></p>
      <ul class="pages">
        
        
          <li class="nav-link"><a href="/about/">About</a>
        
        
        
        
        
        
        
        
        
        
        
        
      </ul>
    </div>

    <div class="site-contact">

      <p><strong>Contact</strong></p>
      <ul class="social-media-list">
        <li>
          <a href="mailto:">
            <i class="fa fa-envelope-o"></i>
            <span class="username">rita@ritacheng.com</span>
          </a>
        </li>

        
          
          <li>
            <a href="https://twitter.com/rtchng" title="Follow me on Twitter">
              <i class="fa fa-twitter"></i>
              <span class="username">rtchng</span>
            </a>
          </li>
          
        
          
          <li>
            <a href="https://github.com/metermaid" title="Fork me on GitHub">
              <i class="fa fa-github"></i>
              <span class="username">metermaid</span>
            </a>
          </li>
          
        
          
          <li>
            <a href="http://www.instagram.com/risky" title="Follow me on Instagram">
              <i class="fa fa-instagram"></i>
              <span class="username">risky</span>
            </a>
          </li>
          
        

      </ul>
    </div>

    <div class="site-signature">
      <p class="rss-subscribe text"><strong>Subscribe <a href="/feed.xml">via RSS</a></strong></p>
      <p class="text"></p>
    </div>

  </div>

</footer>

<!-- Scripts -->
<script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/js/lightbox.min.js"></script>
<script>

$(document).ready(function() {

  // Syntax highlighting
  hljs.initHighlightingOnLoad();

  // Header
  var menuToggle = $('#js-mobile-menu').unbind();
  $('#js-navigation-menu').removeClass("show");
  menuToggle.on('click', function(e) {
    e.preventDefault();
    $('#js-navigation-menu').slideToggle(function(){
      if($('#js-navigation-menu').is(':hidden')) {
        $('#js-navigation-menu').removeAttr('style');
      }
    });
  });


});

</script>




  </body>

</html>
